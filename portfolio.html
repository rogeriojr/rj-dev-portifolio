<!doctype html>
<html lang="pt-br">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="icon" href="img/favicon.png" type="image/png">
	<title>Portfólio</title>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="vendors/linericon/style.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<link rel="stylesheet" href="vendors/owl-carousel/owl.carousel.min.css">
	<link rel="stylesheet" href="css/magnific-popup.css">
	<link rel="stylesheet" href="vendors/nice-select/css/nice-select.css">
	<!-- main css -->
	<link rel="stylesheet" href="css/style.css">
</head>

<body>
	<!-- Seção de Portfólio -->
	<section class="portfolio_area" id="portfolio">
		<div class="container" style="padding-bottom: 60px;">
			<div class="row">
				<div class="col-lg-12">
					<div class="main_title text-left">
						<h2>Qualidade de Trabalho<br>Projetos recentes</h2>
					</div>
				</div>
			</div>
			<div class="filters portfolio-filter">
				<ul>
					<li class="active" data-filter="*">todos</li>
					<li data-filter=".popular">popular</li>
					<li data-filter=".latest"> últimos</li>
				</ul>
			</div>
			<div class="filters-content">
				<div class="row portfolio-grid justify-content-center" id="projetos-container"></div>
			</div>
		</div>
	</section>

	<!-- Seção de Certificações -->
	<section class="container">
		<h2>Minhas Certificações</h2>
		<div class="row" id="certificados-container"></div>
	</section>

	<!-- Scripts -->
	<script>
		// Função para carregar dados dos JSONs
		async function carregarDados() {
			try {
				const [projetosRes, certificadosRes] = await Promise.all([
					fetch('/json/projetos/desenvolvimento/desenvolvimento.json'),
					fetch('/json/certificados/certificados.json')
				]);

				if (!projetosRes.ok || !certificadosRes.ok) {
					throw new Error('Erro ao carregar um dos JSONs');
				}

				return {
					projetos: await projetosRes.json(),
					certificados: await certificadosRes.json()
				};
			} catch (error) {
				console.error('Erro ao carregar dados:', error);
				return { projetos: [], certificados: [] };
			}
		}

		// Renderizar projetos com segurança
		function renderizarProjetos(dadosProjetos) {
			const container = document.getElementById('projetos-container');
			container.innerHTML = ''; // Limpa o container antes de adicionar novos itens

			if (!dadosProjetos || !Array.isArray(dadosProjetos)) {
				console.error('Dados de projetos inválidos ou vazios.');
				return;
			}

			container.innerHTML = dadosProjetos.map(projeto => `
		<div class="col-lg-4 col-md-6 all ${projeto.categoria}">
			<div class="portfolio_box">
				<div class="single_portfolio">
					<img class="img-fluid w-100" src="${projeto.imagem}" alt="${projeto.titulo}">
					<div class="overlay"></div>
					<a href="${projeto.imagem}" class="img-gal">
						<div class="icon">
							<span class="lnr lnr-cross"></span>
						</div>
					</a>
				</div>
				<div class="short_info">
					<h4>${projeto.titulo}</h4>
					<p>${projeto.descricao}</p>
					${(projeto.links || []).map(link => `<p><a href="${link.url}" target="_blank">${link.texto}</a></p>`).join('')}
				</div>
			</div>
		</div>
	`).join('');
		}

		// Inicialização
		document.addEventListener('DOMContentLoaded', async () => {
			try {
				const dados = await carregarDados();
				renderizarProjetos(dados.projetos.projetos || dados.projetos); // Adapta ao formato correto
				renderizarCertificados(dados.certificados.certificados || dados.certificados);
			} catch (error) {
				console.error('Erro na inicialização:', error);
			}
		});

	</script>

	<!-- Scripts de terceiros -->
	<script src="js/jquery-3.2.1.min.js"></script>
	<script src="js/popper.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="vendors/isotope/isotope-min.js"></script>
</body>

</html>